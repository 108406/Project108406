<!DOCTYPE html>
<html lang="en">

<head>

    <title>Plan Yourself</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<<<<<<< HEAD
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/navbar.css">
=======
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
>>>>>>> 3e2fdee9850ac92c20478a7fc9d0a1bc1fb92e52
    <link rel="stylesheet" href="css/member.css">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC|Handlee" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC&display=swap" rel="stylesheet">



</head>

<body>
<<<<<<< HEAD
    <!--------------------------navbar-------------------------------->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">

        <div class="nav-brand">PlanYourself</div>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02"
            aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">

            <ul class="navbar-nav">
                <li>
                    <a href="/Member"> <i class="far fa-user fa-lg"></i>會員</a>
                </li>
                <li>
                    <a href="/content"><i class="fas fa-book fa-lg"></i>計畫</a>
                </li>
                <li>
                    <a href="/mywork"> <i class="far fa-edit fa-lg"></i>我的工作</a>
                </li>
            </ul>

            <div class="search">
                <input id="projectId" class="search-input" type="text" name="search" placeholder="查詢計畫(#123456)">
                <a href="#" id="SearchForBox"><i class="fas fa-search search-icon"></i></a>
                <div class="Search_Box">
                </div>
            </div>

            <div class="study-logout">
                <button class="btn btn-light btn-navbar-study" type="submit" id="show-carousel"><i
                        class="fas fa-question-circle fa-lg" style="padding-right:5px;"></i>教學</button>
                <button class="btn btn-danger btn-navbar-logout" type="submit" style="margin-left:0.5em;"
                    onclick="Logout()"><i class="fas fa-sign-out-alt" style="padding-right:5px;"></i>登出</button>
            </div>

        </div>

    </nav>
    <!----------------------------------------------------------------->
    <div class="container-fluid">
        <!--~~~~~~~~~~~~~~~~~-->
        <!--測試成功&失敗訊息-->
        <div class="alert alert-success SuccessMessenge" role="alert">
            成功加入
        </div>
        <div class="alert alert-danger FailMessenge" role="alert">
            失敗
        </div>
        <!---->
        <!--輪播-->
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="false" data-pause="hover">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/imgs/web-photo1.png" class="d-block w-100" alt="..." id="carousel-4">
                </div>
                <div class="carousel-item">
                    <img src="/imgs/web-photo2.png" class="d-block w-100" alt="..." id="carousel-5">
                </div>
                <div class="carousel-item">
                    <img src="/imgs/web-photo3.png" class="d-block w-100" alt="..." id="carousel-6">
                </div>
                <div class="carousel-item">
                    <img src="/imgs/web-photo4.png" class="d-block w-100" alt="..." id="carousel-7">
                </div>
                <div class="carousel-item">
                    <img src="/imgs/web-photo5.png" class="d-block w-100" alt="..." id="carousel-8">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <!---->
        <div class="content">
            <div class="card card-set">
                <div class="member-img">
                    <label class="upload_cover">
                        <input id="upload_input" type="file" onchange="readURL(this)">
                        <% if (items[0].photo == null || items[0].photo == '') { %>
                        <span class="upload_icon"><img src="/imgs/defaultPhoto.png" class="photo"></span>
                        <% } else { %>
                        <span class="upload_icon"><img src=<%= 'data:image/png;base64,' + items[0].photo %>
                                class="photo"></span>
                        <% } %>
                    </label>
                </div>

                <div class="card-body">
                    <form>
                        <div class="form-group-set">
                            <div class="name-set">
                                <div>姓</div>
                                <div>名:</div>
                            </div>
                            <div class="input-set">
                                <input id="member_name" type="email" class="form-control" placeholder="王大明"
                                    value=<%= items[0].member_name %>>
                            </div>
                        </div>

                        <div class="form-group-set">
                            <div class="name-set">
                                <div>信</div>
                                <div>箱:</div>
                            </div>
                            <div class="input-set">
                                <input id="email" type="email" class="form-control" placeholder="abcd1234@gmail.com"
                                    value=<%= items[0].email %>>
                            </div>
                        </div>

                        <div class="test-form-group-set">
                            <div class="name-set">
                                <div>L</div>
                                <div>i</div>
                                <div>n</div>
                                <div>e</div>
                                <div>B</div>
                                <div>o</div>
                                <div>t</div>
                                <div>推</div>
                                <div>播:</div>
                            </div>
                            <div class="on-off-set">
                                <div class="onoffswitch">
                                    <% var result = ""; %>
                                    <% if (items[0].linebotpush) {
                                        result = "checked";
                                    } %>
=======
    <!--------------------上方導覽列------------------->
    <nav class="navbar navbar-expand-lg navbar-dark top_navbar">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
            aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand mt-2" href="login">
            <h3>Plan Yourself</h3>
        </a>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
            <form class="form-inline my-2 my-lg-0 mx-auto">
                <input class="form-control mr-2 search-input" type="search" placeholder="專案代碼" aria-label="Search">
                <button class="btn-signout" type="submit">搜尋</button>
            </form>
            <form class="form-inline my-2 my-lg-0 mr-end">
                <button class="btn-signout my-2 my-sm-0" type="submit">登出</button>
            </form>
        </div>
    </nav>
    <!--------------------下方導覽---------------------->
    <ul class="nav nav-tabs nav-pills nav-fill">
        <li class="nav-item">
            <a class="nav-link bg-light text-dark" href=<%= "/member?userid=" + account %>>會員</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active bg-light text-dark" href=<%= "/content?userid=" + account %>>計畫</a>
        </li>
        <li class="nav-item">
            <a class="nav-link bg-light text-dark" href="mywork">我的工作</a>
        </li>
    </ul>
    <!------------------------------------------------->
    <div class="container">
        <!--~~~~~~~~~~~~~~~~~-->
        <div class="row">
            <!-- <h3>個人資料</h3> -->
            <div class="col-xs-12 col-md-12 col-lg-12 testcolor1">
                <div class="text-center mt-5 test">
                    <label class="upload_cover test1">
                        <input id="upload_input" type="file" name="photo" enctype="multipart/form-data"
                            onchange="readURL(this)">
                        <span class="upload_icon">
                            <img src=<%= 'data:image/png;base64,' + items[0].photo %> class="photo">
                        </span>
                    </label>
                </div>
                <form>
                    <div class="container-fluid">
                        <div class="form-group row no-gutters mt-5">
                            <label for="inputName" class="col-sm-2 col-form-label offset-md-3 text-center">
                                <h4>姓名:</h4>
                            </label>
                            <div class="col-xs-5 col-md-3">
                                <input class="form-control" type="text" value=<%= items[0].member_name %>
                                    id="member_name">
                            </div>
                        </div>

                        <div class="form-group row no-gutters mt-5">
                            <label for="inputName" class="col-sm-2 col-form-label offset-md-3 text-center">
                                <h4>信箱:</h4>
                            </label>
                            <div class="col-xs-5 col-md-3">
                                <input type="email" class="form-control" id="email" aria-describedby="emailHelp"
                                    value=<%= items[0].email %>>
                                <span style="color: red; font-size: 0.8rem; display: none"
                                    id="waning">這不是一個有效的Email格式。</span>
                            </div>
                        </div>

                        <div class="form-group row no-gutters mt-5">
                            <label for="inputName" class="col-sm-2 col-form-label offset-md-3 text-center">
                                <h3>linebot推播:</h3>
                            </label>
                            <div class="col-xs-4">
                                <div class="onoffswitch">
                                    <% var result = ""; %>
                                    <% if (items[0].linebotpush) {
                                            result = "checked";
                                        } 
                                        %>
>>>>>>> 3e2fdee9850ac92c20478a7fc9d0a1bc1fb92e52
                                    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox"
                                        onclick="javascript:ChangeLineBotPush(<%= items[0].linebotpush %>)"
                                        id="myonoffswitch" <%= result %>>
                                    <label class="onoffswitch-label" for="myonoffswitch">
                                        <span class="onoffswitch-inner"></span>
                                        <span class="onoffswitch-switch"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
<<<<<<< HEAD
                    </form>
                </div>
                <div class="btn-set">
                    <button class="change-btn" onclick="javascript:SubmitData();">變更傳送</button>
                    <button class="delete-btn" data-target="#delete" data-toggle="modal">刪除帳號</button>
                </div>
            </div>


        </div>

    </div>
    <!-- Modal 刪除帳號-->

    <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="delete" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete">刪除帳號</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form>
                    <div class="modal-body text-center">
                        請確認是否真的要刪除帳號!
                    </div>

                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">關閉</button>
                        <button onclick="javascript:DeleteAcount();" type="button" class="btn btn-secondary">確定</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!------------scrpit----------->
    <script src="/js/BackEnd_Member.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/js/jquery.ui.touch-punch.min.js"></script>
    <script src="/js/SearchBox.js"></script>
    <script src="/js/AlertMessenge.js"></script>
    <script src="/js/Mywork_Carousel.js"></script>
    <script src="/js/Common.js"></script>
    <script src="/js/BackgroundChange.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
=======

                    </div>
                </form>

                <div class="row no-gutters d-flex justify-content-center">
                    <div class="col-xs-3 col-md-4 text-center">
                        <button type="button" class="btn btn-primary btn-lg"
                            onclick="javascript:SubmitData();">變更傳送</button>
                    </div>
                    <div class="col-xs-3 col-md-4 text-center">
                        <button type="button" class="btn btn-secondary btn-lg" data-toggle="modal"
                            data-target="#delete">刪除帳號</button>
                    </div>
                </div>

                <!-- Modal 刪除帳號-->
                <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="delete"
                    aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="delete">刪除帳號</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form>
                                <div class="modal-body text-center">
                                    請確認是否真的要刪除帳號!
                                </div>

                                <div class="modal-footer justify-content-center">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">關閉</button>
                                    <button type="button" class="btn btn-secondary"
                                        onclick="javascript:DeleteAcount();">確定</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--**************************-->
            <!------------scrpit----------->
            <script>

                function SubmitData() {
                    var canSubmit = true;
                    if ($('#member_name').val().trim() == "") {
                        $('#member_name').val("");
                        $('#member_name').css({
                            border: "1px solid red"
                        });
                        $('#member_name').attr('placeholder', "請輸入您的姓名。");
                        canSubmit = false;
                    } else {
                        $('#member_name').css({
                            border: "none"
                        });
                    }
                    if ($('#email').val().trim() == "") {
                        $('#email').val().trim("");
                        $('#email').css({
                            border: "1px solid red"
                        });
                        $('#email').attr('placeholder', "請輸入您的電子信箱。");
                        canSubmit = false;
                    } else {
                        var re = /\S+@\S+\.\S+/;
                        if (re.test($('#email').val().trim())) {
                            $('#email').css({
                                border: "none"
                            });
                            $('#waning').css({
                                display: "none"
                            });
                        } else {
                            $('#email').css({
                                border: "1px solid red"
                            });
                            $('#waning').css({
                                display: "block"
                            });
                            canSubmit = false;
                        }
                    }

                    if (canSubmit) {
                        $.ajax({
                            type: 'POST',
                            url: 'member/update',
                            data: { email: $('#email').val().trim(), member_name: $('#member_name').val().trim() }
                        });
                    }
                }
                // Check for the File API support.
                if (window.File && window.FileReader && window.FileList && window.Blob) {
                    document.getElementById('upload_input').addEventListener('change', handleFileSelect, false);
                } else {
                    alert('The File APIs are not fully supported in this browser.');
                }

                function handleFileSelect(evt) {
                    var f = evt.target.files[0]; // FileList object
                    var type;
                    var reader = new FileReader();

                    if (f.type == 'image/jpeg') {
                        type = '.jpg';
                    } else if (f.type == 'image/png') {
                        type = '.png';
                    } else {
                        return;
                    }
                    if (f.size > 69632) {
                        return;
                    }

                    // Closure to capture the file information.
                    reader.onload = (function (theFile) {
                        return function (e) {
                            var binaryData = e.target.result;
                            //Converting Binary Data to base 64
                            var base64String = window.btoa(binaryData);
                            //showing file converted to base64
                            $.ajax({
                                type: 'POST',
                                url: 'member/photo',
                                data: { "photoContent": base64String, "photoType": type }
                            });
                        };
                    })(f);
                    // Read in the image file as a data URL.
                    reader.readAsBinaryString(f);

                }
                function ChangeLineBotPush(value) {
                    $.ajax({
                        type: 'POST',
                        url: 'member/linebotPush',
                        data: { "linebotPush": !value }
                    });
                }
                function DeleteAcount() {
                    $.ajax({
                        type: 'POST',
                        url: 'member/delete',
                        data: { userId: "B001" }
                    });
                }
                function readURL(input) {
                    if (input.files[0].type == 'image/jpeg') {
                        type = '.jpg';
                    } else if (input.files[0].type == 'image/png') {
                        type = '.png';
                    } else {
                        alert("無法支援此格式。僅支援jpg、png");
                        return;
                    }
                    if (input.files[0].size > 69632) {
                        alert("僅接受68KB以下大小的jpg、png檔");
                        return;
                    }
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            $('.photo').attr('src', e.target.result);
                        }

                        reader.readAsDataURL(input.files[0]);
                    }



                }
            </script>
            <script src="https://code.jquery.com/jquery-3.4.1.min.js"
                integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
                integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
                crossorigin="anonymous"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
                integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
                crossorigin="anonymous"></script>
>>>>>>> 3e2fdee9850ac92c20478a7fc9d0a1bc1fb92e52
</body>

</html>